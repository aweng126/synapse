@namespace Synapse.Dashboard
@using Neuroglia.Blazor.Dagre
@using Neuroglia.Blazor.Dagre.Templates
@inherits ClusterTemplate

<g class="cluster @Cluster.CssClass" transform="translate(@Cluster.X.ToInvariantString(), @Cluster.Y.ToInvariantString())">
    <CascadingValue Name="Node" Value="Cluster">
        <NodeShapeTemplate />
        <NodeLabelTemplate /> 
        <CascadingValue Name="ActiveInstances" Value="TaskNode.OperativeInstancesCount">
            <CascadingValue Name="FaultedInstances" Value="TaskNode.FaultedInstancesCount">
                
            </CascadingValue>
        </CascadingValue>
        @if (Graph.EnableProfiling) {
            <circle cx="0" cy="0" r="1" fill="red" />
        }
    </CascadingValue>
</g>
    
@code {
    protected virtual TaskNodeViewModel TaskNode => (TaskNodeViewModel)this.Cluster;
}